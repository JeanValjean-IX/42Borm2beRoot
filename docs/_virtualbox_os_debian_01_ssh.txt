Actualizamos el sistema:
$ apt update
$ apt upgrade

Instalamos el servicio ssh:
$ apt install openssh-server

Verificamos el estado del servicio ssh:
$ systemctl status ssh

El el caso que el servicio no esté activo, lo activamos:
$ systemctl start ssh

Reiniciamos el server y volvemos a verificar el servicio de ssh:
$ systemctl status ssh

En el caso que el servicio ssh no te activo, significará que no está configurado
para su inicio automático después de reiniciar o iniciar el servidor. Para este
caso configuramos el servicio para que se inicie una vez arrancado el server:

$ systemctl enable ssh

Averiguamos la ip del server:

$ ip a

Para este máquina virtual la ip address es: 10.0.2.15/24

Llegados a este punto podemos hacer 2 cosas:

a)	Reconfigurar virtualbox de manera que el adaptador realize un reenvio de puertos.
	
	Preferencias de red - Conectado a: NAT
	-----------------------------------------------------------------------------------
	Selecionamos "opciones avanzadas" y "reenvio de puertos" y añadimos la regla:	

	nombre           : ssh
	ip anfitrión     : 127.0.0.1
	puerto anfitrión : 4242
	ip invitado      : 10.0.2.15 (corresponde a la ip address del servidor)
	puerto invitado  : 22
	
	$ ssh xxxxx@127.0.0.1 -p 4242

b)	Reconfigurar virtualbox de manera que el adaptador realize un adaptador puente.

	Preferencias de red - Conectado a: Adaptador puente
	-----------------------------------------------------------------------------------
	Selecionamos la opción "adaptador puente" en el apartado de "conectados a"
	
	$ ssh xxxxx@10.0.2.15 -p 4242

Una vez que verificamos que funciona el servicio de ssh, cambiamos el puerto que utliza
el servicio ssh (port 22) a otro diferente (port 4242). Para poder hacer esto, primero
hacemos una copia de seguridad del fichero de configuración del servicio y después lo
modificamos:

(tambiém aprovecharos para denegar el acceso del root desde ssh)

$ cp /etc/ssh/sshd_config /etc/ssh/sshd_config.backup
$ nano /etc/ssh/sshd_config

Buscamos la linea "#Port 22" y la cambiamos por "Port 4242". 
Buscamos la linea "#PermitRootLogin prohibit-password" y la cambiamos por "PermitRootLogin prohibit-password"

Guardamos las modificaciones y reiniciamos el servicio de ssh.

$ systemctl restart ssh

Volvemos a verificar el acceso por ssh al servidor:

$ ssh xxxxx@10.0.2.15 -p 4242










 



